<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Global Tiger üêØ - Smart Affiliate Store</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --orange: #FF6B00;
    --orange-dark: #cc5500;
    --gold: #FFD700;
    --dark: #0d0d0d;
    --dark2: #141414;
    --dark3: #1c1c1c;
    --card: #1e1e1e;
    --border: rgba(255,255,255,0.08);
    --text: #f0f0f0;
    --text-muted: #888;
    --green: #22c55e;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Outfit', sans-serif;
    background: var(--dark);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
  }

  header {
    background: rgba(13,13,13,0.97);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: 0;
    z-index: 200;
  }

  .header-ticker {
    background: var(--orange);
    padding: 5px 0;
    overflow: hidden;
    white-space: nowrap;
  }

  .ticker-text {
    display: inline-block;
    animation: ticker 35s linear infinite;
    font-size: 12px;
    font-weight: 600;
    color: white;
    letter-spacing: 0.5px;
  }

  @keyframes ticker {
    from { transform: translateX(100vw); }
    to { transform: translateX(-100%); }
  }

  nav {
    max-width: 1400px;
    margin: auto;
    padding: 14px 30px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 20px;
    flex-wrap: wrap;
  }

  .logo {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 30px;
    letter-spacing: 2px;
    text-decoration: none;
    color: white;
  }

  .logo span { color: var(--orange); }

  .currency-display {
    display: flex;
    align-items: center;
    gap: 10px;
    background: var(--dark3);
    border: 1px solid var(--border);
    border-radius: 50px;
    padding: 8px 18px;
    font-size: 14px;
    font-weight: 500;
  }

  .currency-code { color: var(--gold); font-weight: 700; }

  .nav-right { display: flex; align-items: center; gap: 12px; }

  .ai-status {
    display: flex;
    align-items: center;
    gap: 7px;
    background: rgba(34,197,94,0.1);
    border: 1px solid rgba(34,197,94,0.2);
    border-radius: 50px;
    padding: 6px 14px;
    font-size: 12px;
    font-weight: 600;
    color: var(--green);
  }

  .ai-dot {
    width: 8px; height: 8px;
    background: var(--green);
    border-radius: 50%;
    animation: blink 1.5s infinite;
  }

  @keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.3} }

  .nav-btn {
    background: var(--orange);
    color: white;
    border: none;
    padding: 10px 22px;
    border-radius: 50px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    font-family: 'Outfit', sans-serif;
    transition: all 0.2s;
  }

  .nav-btn:hover { background: var(--orange-dark); transform: translateY(-1px); }

  /* HERO */
  .hero {
    background: linear-gradient(135deg, #0d0d0d 0%, #1a0800 50%, #0d0d0d 100%);
    padding: 80px 30px 60px;
    text-align: center;
    position: relative;
    overflow: hidden;
  }

  .hero::before {
    content: 'üêØ';
    position: absolute;
    font-size: 350px;
    opacity: 0.04;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: none;
  }

  .hero-tag {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: rgba(255,107,0,0.15);
    border: 1px solid rgba(255,107,0,0.3);
    color: var(--orange);
    padding: 6px 18px;
    border-radius: 50px;
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 24px;
  }

  .hero h1 {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 72px;
    letter-spacing: 3px;
    line-height: 1;
    margin-bottom: 14px;
    animation: fadeUp 0.6s ease forwards;
  }

  .hero h1 span { color: var(--orange); }

  .hero-sub {
    font-size: 17px;
    color: var(--text-muted);
    margin-bottom: 6px;
  }

  .hero-hindi {
    font-size: 15px;
    color: rgba(255,107,0,0.7);
    margin-bottom: 40px;
  }

  @keyframes fadeUp {
    from { opacity:0; transform:translateY(20px); }
    to { opacity:1; transform:translateY(0); }
  }

  /* ADD LINK BOX */
  .add-section {
    max-width: 780px;
    margin: 0 auto;
  }

  .add-box {
    background: var(--card);
    border: 1px solid rgba(255,107,0,0.25);
    border-radius: 20px;
    padding: 28px;
  }

  .add-box h3 {
    font-size: 17px;
    font-weight: 700;
    margin-bottom: 5px;
  }

  .add-box p {
    font-size: 13px;
    color: var(--text-muted);
    margin-bottom: 18px;
  }

  .link-row { display: flex; gap: 10px; }

  .link-input {
    flex: 1;
    background: var(--dark3);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 14px 18px;
    color: var(--text);
    font-size: 14px;
    font-family: 'Outfit', sans-serif;
    outline: none;
    transition: border-color 0.2s;
  }

  .link-input:focus { border-color: var(--orange); }
  .link-input::placeholder { color: var(--text-muted); }

  .add-btn {
    background: linear-gradient(135deg, var(--orange), #ff8c00);
    color: white;
    border: none;
    padding: 14px 26px;
    border-radius: 12px;
    cursor: pointer;
    font-size: 15px;
    font-weight: 700;
    font-family: 'Outfit', sans-serif;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 8px;
    white-space: nowrap;
  }

  .add-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(255,107,0,0.4); }
  .add-btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }

  .store-pills {
    display: flex;
    gap: 8px;
    margin-top: 14px;
    flex-wrap: wrap;
  }

  .store-pill {
    background: var(--dark3);
    border: 1px solid var(--border);
    padding: 4px 13px;
    border-radius: 50px;
    font-size: 12px;
    color: var(--text-muted);
  }

  /* MAIN */
  .main {
    max-width: 1400px;
    margin: 0 auto;
    padding: 50px 30px;
    display: grid;
    grid-template-columns: 260px 1fr;
    gap: 30px;
  }

  /* SIDEBAR */
  .sidebar {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 22px;
    height: fit-content;
    position: sticky;
    top: 100px;
  }

  .panel-title {
    font-size: 12px;
    font-weight: 700;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--orange);
    margin-bottom: 16px;
  }

  .stat-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 11px 0;
    border-bottom: 1px solid var(--border);
    font-size: 13px;
  }

  .stat-row:last-child { border-bottom: none; }
  .stat-label { color: var(--text-muted); }
  .stat-value { font-weight: 700; color: var(--gold); }

  .rates-box {
    background: var(--dark3);
    border-radius: 14px;
    padding: 16px;
    margin-top: 18px;
  }

  .rates-title {
    font-size: 12px;
    font-weight: 600;
    color: var(--text-muted);
    margin-bottom: 10px;
  }

  .rate-row {
    display: flex;
    justify-content: space-between;
    padding: 5px 0;
    font-size: 13px;
  }

  .rate-lbl { color: var(--text-muted); }
  .rate-val { font-weight: 600; color: var(--green); }

  .demo-btn {
    width: 100%;
    margin-top: 18px;
    background: var(--dark3);
    border: 1px solid var(--border);
    color: var(--text);
    padding: 12px;
    border-radius: 12px;
    cursor: pointer;
    font-size: 13px;
    font-weight: 600;
    font-family: 'Outfit', sans-serif;
    transition: all 0.2s;
  }

  .demo-btn:hover { border-color: var(--orange); color: var(--orange); }

  /* PRODUCTS */
  .area-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 22px;
    flex-wrap: wrap;
    gap: 12px;
  }

  .area-title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 34px;
    letter-spacing: 2px;
  }

  .area-title span { color: var(--orange); }

  .filter-bar { display: flex; gap: 8px; flex-wrap: wrap; }

  .chip {
    background: var(--dark3);
    border: 1px solid var(--border);
    color: var(--text-muted);
    padding: 6px 16px;
    border-radius: 50px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    font-family: 'Outfit', sans-serif;
  }

  .chip.active, .chip:hover {
    background: var(--orange);
    border-color: var(--orange);
    color: white;
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(270px, 1fr));
    gap: 20px;
  }

  /* EMPTY */
  .empty {
    text-align: center;
    padding: 80px 20px;
    grid-column: 1/-1;
  }

  .empty-icon { font-size: 70px; opacity: 0.4; margin-bottom: 16px; }
  .empty h3 { font-size: 20px; font-weight: 700; margin-bottom: 8px; }
  .empty p { color: var(--text-muted); font-size: 14px; line-height: 1.7; }

  /* PRODUCT CARD */
  .pcard {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 20px;
    overflow: hidden;
    transition: all 0.3s;
    animation: cardIn 0.4s ease forwards;
    opacity: 0;
  }

  @keyframes cardIn {
    from { opacity:0; transform:translateY(16px); }
    to { opacity:1; transform:translateY(0); }
  }

  .pcard:hover {
    transform: translateY(-6px);
    border-color: rgba(255,107,0,0.35);
    box-shadow: 0 20px 50px rgba(0,0,0,0.5);
  }

  .pimg {
    height: 190px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 75px;
    background: var(--dark3);
    position: relative;
  }

  .ribbon {
    position: absolute;
    top: 10px; right: 10px;
    background: rgba(0,0,0,0.75);
    backdrop-filter: blur(5px);
    padding: 3px 10px;
    border-radius: 8px;
    font-size: 11px;
    font-weight: 700;
    border: 1px solid var(--border);
  }

  .disc-badge {
    position: absolute;
    top: 10px; left: 10px;
    background: var(--orange);
    color: white;
    padding: 3px 10px;
    border-radius: 8px;
    font-size: 11px;
    font-weight: 800;
  }

  .pbody { padding: 16px; }

  .pstore {
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    margin-bottom: 7px;
  }

  .pname {
    font-size: 14px;
    font-weight: 600;
    line-height: 1.4;
    margin-bottom: 4px;
    color: var(--text);
  }

  .pmeta {
    font-size: 12px;
    color: var(--text-muted);
    margin-bottom: 14px;
  }

  .price-box {
    background: var(--dark3);
    border-radius: 12px;
    padding: 12px 14px;
    margin-bottom: 12px;
  }

  .price-top { display: flex; align-items: center; justify-content: space-between; }

  .price-main {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 26px;
    color: var(--gold);
    letter-spacing: 1px;
  }

  .save-badge {
    background: rgba(34,197,94,0.15);
    color: var(--green);
    border: 1px solid rgba(34,197,94,0.3);
    padding: 3px 9px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 700;
  }

  .price-inr { font-size: 12px; color: var(--text-muted); margin-top: 2px; }
  .price-orig { font-size: 12px; color: var(--text-muted); text-decoration: line-through; }

  .card-btns { display: flex; gap: 8px; }

  .btn-buy {
    flex: 1;
    background: linear-gradient(135deg, var(--orange), #ff8c00);
    color: white;
    border: none;
    padding: 12px;
    border-radius: 12px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 700;
    font-family: 'Outfit', sans-serif;
    text-decoration: none;
    text-align: center;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 5px;
  }

  .btn-buy:hover { box-shadow: 0 6px 20px rgba(255,107,0,0.4); transform: translateY(-1px); }

  .btn-del {
    background: var(--dark3);
    border: 1px solid var(--border);
    color: var(--text-muted);
    padding: 12px 14px;
    border-radius: 12px;
    cursor: pointer;
    font-size: 15px;
    transition: all 0.2s;
  }

  .btn-del:hover { background: rgba(239,68,68,0.1); border-color: rgba(239,68,68,0.4); color: #ef4444; }

  /* LOADING */
  .spinner {
    width: 20px; height: 20px;
    border: 2px solid rgba(255,255,255,0.3);
    border-top-color: white;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    display: inline-block;
  }

  @keyframes spin { to { transform: rotate(360deg); } }

  /* TOAST */
  .toast {
    position: fixed;
    bottom: 28px; right: 28px;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 14px 20px;
    font-size: 14px;
    font-weight: 500;
    z-index: 9999;
    transform: translateY(100px);
    opacity: 0;
    transition: all 0.3s;
    max-width: 300px;
  }

  .toast.show { transform: translateY(0); opacity: 1; }
  .toast.success { border-color: rgba(34,197,94,0.4); }
  .toast.error { border-color: rgba(239,68,68,0.4); }

  footer {
    background: var(--dark2);
    border-top: 1px solid var(--border);
    padding: 28px;
    text-align: center;
    color: var(--text-muted);
    font-size: 13px;
  }

  @media(max-width:900px) {
    .main { grid-template-columns: 1fr; }
    .sidebar { position: static; }
    .hero h1 { font-size: 48px; }
    nav { flex-wrap: wrap; }
  }
</style>
</head>
<body>

<div class="toast" id="toast"></div>

<header>
  <div class="header-ticker">
    <span class="ticker-text">üêØ Global Tiger ‚Äî AI-Powered Affiliate Store &nbsp;|&nbsp; üåç Auto Currency by Country &nbsp;|&nbsp; ü§ñ Paste Link ‚Üí AI does everything! &nbsp;|&nbsp; üõí Amazon ‚Ä¢ Flipkart ‚Ä¢ Meesho ‚Ä¢ Myntra ‚Ä¢ AJIO ‚Ä¢ Nykaa &nbsp;|&nbsp; üí∞ Best Deals Worldwide &nbsp;|&nbsp; üêØ Global Tiger ‚Äî Smart Shopping</span>
  </div>
  <nav>
    <a href="#" class="logo">GLOBAL <span>TIGER</span> üêØ</a>
    <div class="currency-display">
      <span id="flagDisplay">üåç</span>
      <span id="countryDisplay">Detecting...</span>
      <span class="currency-code" id="currencyDisplay">---</span>
    </div>
    <div class="nav-right">
      <div class="ai-status"><div class="ai-dot"></div> AI Active</div>
      <button class="nav-btn" onclick="document.getElementById('linkInput').focus();window.scrollTo({top:0,behavior:'smooth'})">+ Add Product</button>
    </div>
  </nav>
</header>

<section class="hero">
  <div class="hero-tag">ü§ñ AI-Powered Affiliate Store</div>
  <h1>PASTE LINK.<br><span>AI DOES REST.</span></h1>
  <p class="hero-sub">Add any product link ‚Äî AI auto-detects title, price & category. Currency changes by visitor's country.</p>
  <p class="hero-hindi">‡§ï‡•ã‡§à ‡§≠‡•Ä product ‡§ï‡§æ link paste ‡§ï‡§∞‡•ã ‚Äî AI ‡§∏‡§¨ ‡§ï‡•Å‡§õ ‡§ñ‡•Å‡§¶ ‡§ï‡§∞‡•á‡§ó‡§æ‡•§ ‡§¶‡•á‡§∂ ‡§ï‡•á ‡§π‡§ø‡§∏‡§æ‡§¨ ‡§∏‡•á currency automatic! üêØ</p>

  <div class="add-section" id="addSection">
    <div class="add-box">
      <h3>üîó Product Link ‡§°‡§æ‡§≤‡•á‡§Ç | Add Product Link</h3>
      <p>Amazon, Flipkart, Meesho, Myntra, AJIO ‡§Ø‡§æ ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä store ‡§ï‡§æ link paste ‡§ï‡§∞‡•á‡§Ç ‚Äî AI ‡§¨‡§æ‡§ï‡•Ä ‡§∏‡§¨ ‡§ï‡§∞‡•á‡§ó‡§æ</p>
      <div class="link-row">
        <input type="url" class="link-input" id="linkInput" placeholder="https://www.amazon.in/product-link ‡§Ø‡§π‡§æ‡§Å paste ‡§ï‡§∞‡•á‡§Ç...">
        <button class="add-btn" id="addBtn" onclick="addProduct()">
          <span>ü§ñ</span> AI Add
        </button>
      </div>
      <div class="store-pills">
        <span class="store-pill">üõí Amazon</span>
        <span class="store-pill">üõçÔ∏è Flipkart</span>
        <span class="store-pill">üè∑Ô∏è Meesho</span>
        <span class="store-pill">üëó Myntra</span>
        <span class="store-pill">‚ú® AJIO</span>
        <span class="store-pill">üíÑ Nykaa</span>
        <span class="store-pill">üåê Any Store</span>
      </div>
    </div>
  </div>
</section>

<div class="main">
  <aside class="sidebar">
    <div class="panel-title">üìä Dashboard</div>
    <div class="stat-row"><span class="stat-label">Total Products</span><span class="stat-value" id="totalP">0</span></div>
    <div class="stat-row"><span class="stat-label">Your Country</span><span class="stat-value" id="sCountry">...</span></div>
    <div class="stat-row"><span class="stat-label">Currency</span><span class="stat-value" id="sCurrency">...</span></div>
    <div class="stat-row"><span class="stat-label">Exchange Rate</span><span class="stat-value" id="sRate">...</span></div>

    <div class="rates-box">
      <div class="rates-title">üí± Live Rates (1 INR =)</div>
      <div id="ratesList"><div class="rate-row"><span class="rate-lbl">Loading...</span></div></div>
    </div>

    <button class="demo-btn" onclick="loadDemo()">üéØ Load Demo Products</button>
  </aside>

  <div>
    <div class="area-header">
      <div class="area-title">MY <span>STORE</span></div>
      <div class="filter-bar">
        <button class="chip active" onclick="setFilter('all',this)">All</button>
        <button class="chip" onclick="setFilter('amazon',this)">Amazon</button>
        <button class="chip" onclick="setFilter('flipkart',this)">Flipkart</button>
        <button class="chip" onclick="setFilter('meesho',this)">Meesho</button>
        <button class="chip" onclick="setFilter('other',this)">Other</button>
      </div>
    </div>
    <div class="grid" id="grid"></div>
  </div>
</div>

<footer>
  <div style="font-family:'Bebas Neue',sans-serif;font-size:22px;letter-spacing:2px;margin-bottom:8px">GLOBAL <span style="color:var(--orange)">TIGER</span> üêØ</div>
  <p>AI-Powered Affiliate Store | Auto Currency Detection | üåç Global Reach</p>
  <p style="margin-top:8px;font-size:11px;opacity:0.4">Affiliate Disclosure: We earn commission when you purchase through our links. Prices shown in your local currency using live exchange rates.</p>
</footer>

<script>
// ===================== STATE =====================
let userCurrency = 'INR';
let userCountry = 'India';
let userFlag = 'üáÆüá≥';
let exchangeRates = {};
let products = [];
let currentFilter = 'all';

// Load from localStorage
try { products = JSON.parse(localStorage.getItem('gt_products') || '[]'); } catch(e) { products = []; }

const CURRENCY_MAP = {
  'IN':{ currency:'INR', flag:'üáÆüá≥', symbol:'‚Çπ', name:'India' },
  'US':{ currency:'USD', flag:'üá∫üá∏', symbol:'$', name:'USA' },
  'GB':{ currency:'GBP', flag:'üá¨üáß', symbol:'¬£', name:'UK' },
  'AE':{ currency:'AED', flag:'üá¶üá™', symbol:'AED ', name:'UAE' },
  'SA':{ currency:'SAR', flag:'üá∏üá¶', symbol:'SAR ', name:'Saudi Arabia' },
  'AU':{ currency:'AUD', flag:'üá¶üá∫', symbol:'A$', name:'Australia' },
  'CA':{ currency:'CAD', flag:'üá®üá¶', symbol:'C$', name:'Canada' },
  'DE':{ currency:'EUR', flag:'üá©üá™', symbol:'‚Ç¨', name:'Germany' },
  'FR':{ currency:'EUR', flag:'üá´üá∑', symbol:'‚Ç¨', name:'France' },
  'JP':{ currency:'JPY', flag:'üáØüáµ', symbol:'¬•', name:'Japan' },
  'SG':{ currency:'SGD', flag:'üá∏üá¨', symbol:'S$', name:'Singapore' },
  'NZ':{ currency:'NZD', flag:'üá≥üáø', symbol:'NZ$', name:'New Zealand' },
  'PK':{ currency:'PKR', flag:'üáµüá∞', symbol:'Rs ', name:'Pakistan' },
  'BD':{ currency:'BDT', flag:'üáßüá©', symbol:'‡ß≥', name:'Bangladesh' },
  'NP':{ currency:'NPR', flag:'üá≥üáµ', symbol:'Rs ', name:'Nepal' },
  'MY':{ currency:'MYR', flag:'üá≤üáæ', symbol:'RM', name:'Malaysia' },
  'ZA':{ currency:'ZAR', flag:'üáøüá¶', symbol:'R', name:'South Africa' },
  'NG':{ currency:'NGN', flag:'üá≥üá¨', symbol:'‚Ç¶', name:'Nigeria' },
};

const FALLBACK = { INR:1, USD:0.012, GBP:0.0095, EUR:0.011, AED:0.044, SAR:0.045, AUD:0.018, CAD:0.016, JPY:1.78, SGD:0.016, NZD:0.020, PKR:3.34, BDT:1.32, NPR:1.60, MYR:0.056, ZAR:0.22, NGN:19.5 };

// ===================== LOCATION & CURRENCY =====================
async function init() {
  try {
    const r = await fetch('https://ipapi.co/json/');
    const d = await r.json();
    const info = CURRENCY_MAP[d.country_code] || { currency:'USD', flag:'üåç', symbol:'$', name: d.country_name };
    userCurrency = info.currency; userCountry = info.name; userFlag = info.flag;
  } catch(e) {}

  document.getElementById('flagDisplay').textContent = userFlag;
  document.getElementById('countryDisplay').textContent = userCountry;
  document.getElementById('currencyDisplay').textContent = userCurrency;
  document.getElementById('sCountry').textContent = userCountry;
  document.getElementById('sCurrency').textContent = userCurrency;

  try {
    const r = await fetch('https://api.exchangerate-api.com/v4/latest/INR');
    const d = await r.json();
    exchangeRates = d.rates;
  } catch(e) { exchangeRates = FALLBACK; }

  const rate = exchangeRates[userCurrency] || 1;
  document.getElementById('sRate').textContent = `1 INR = ${rate.toFixed(4)} ${userCurrency}`;
  renderRates();
  renderAll();
}

function renderRates() {
  const list = ['USD','GBP','EUR','AED','AUD','SAR','JPY','SGD'];
  document.getElementById('ratesList').innerHTML = list.map(c => {
    const rate = exchangeRates[c] || FALLBACK[c] || '‚Äî';
    const flag = Object.values(CURRENCY_MAP).find(x=>x.currency===c)?.flag || '';
    return `<div class="rate-row"><span class="rate-lbl">${flag} ${c}</span><span class="rate-val">${typeof rate==='number'?rate.toFixed(4):rate}</span></div>`;
  }).join('');
}

function convert(inrPrice) {
  if (userCurrency === 'INR') return { txt: '‚Çπ' + inrPrice.toLocaleString('en-IN') };
  const rate = exchangeRates[userCurrency] || FALLBACK[userCurrency] || 1;
  const val = inrPrice * rate;
  const info = Object.values(CURRENCY_MAP).find(x=>x.currency===userCurrency);
  const sym = info?.symbol || userCurrency + ' ';
  const fmt = val >= 100 ? Math.round(val).toLocaleString() : val.toFixed(2);
  return { txt: sym + fmt, inr: '‚âà ‚Çπ' + inrPrice.toLocaleString('en-IN') };
}

// ===================== STORE DETECTION =====================
function getStore(url) {
  const u = url.toLowerCase();
  if (u.includes('amazon')) return { name:'Amazon', emoji:'üõí', color:'#FF9900', key:'amazon' };
  if (u.includes('flipkart')) return { name:'Flipkart', emoji:'üõçÔ∏è', color:'#2874F0', key:'flipkart' };
  if (u.includes('meesho')) return { name:'Meesho', emoji:'üè∑Ô∏è', color:'#9B59B6', key:'meesho' };
  if (u.includes('myntra')) return { name:'Myntra', emoji:'üëó', color:'#FF3E6C', key:'other' };
  if (u.includes('ajio')) return { name:'AJIO', emoji:'‚ú®', color:'#E91E63', key:'other' };
  if (u.includes('nykaa')) return { name:'Nykaa', emoji:'üíÑ', color:'#FC2779', key:'other' };
  return { name:'Store', emoji:'üåê', color:'var(--orange)', key:'other' };
}

// ===================== AI FETCH =====================
async function fetchWithAI(url) {
  const store = getStore(url);
  const prompt = `You are a product data extractor for an affiliate website called Global Tiger.

Product URL: ${url}
Store: ${store.name}

Based on the URL keywords and store, generate realistic product data.
Return ONLY valid JSON (no markdown, no code blocks) with exactly this structure:
{
  "name": "realistic product name based on URL keywords",
  "category": "Electronics/Fashion/Home/Beauty/Sports/Books/Other",
  "emoji": "one relevant emoji",
  "priceINR": 1999,
  "originalPriceINR": 3499,
  "discount": 43,
  "rating": 4.2,
  "reviews": 1450
}

Rules:
- priceINR must be a number (no symbols, no commas)
- originalPriceINR must be higher than priceINR
- discount is integer percentage
- Make pricing realistic for Indian e-commerce`;

  const res = await fetch("https://api.anthropic.com/v1/messages", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      model: "claude-sonnet-4-20250514",
      max_tokens: 1000,
      messages: [{ role:"user", content: prompt }]
    })
  });

  const data = await res.json();
  const text = data.content?.map(i=>i.text||'').join('') || '';
  const clean = text.replace(/```json|```/g,'').trim();
  return { ...JSON.parse(clean), store };
}

// ===================== ADD PRODUCT =====================
async function addProduct() {
  const input = document.getElementById('linkInput');
  const btn = document.getElementById('addBtn');
  const url = input.value.trim();

  if (!url) { toast('‚ùå Please paste a product link!','error'); return; }
  if (!url.startsWith('http')) { toast('‚ùå Please enter a valid URL (start with https://)','error'); return; }

  btn.disabled = true;
  btn.innerHTML = '<div class="spinner"></div> AI Fetching...';

  try {
    const pd = await fetchWithAI(url);
    const p = {
      id: Date.now(),
      url,
      name: pd.name || pd.store.name + ' Product',
      category: pd.category || 'Other',
      emoji: pd.emoji || 'üõí',
      priceINR: Number(pd.priceINR) || 999,
      originalPriceINR: Number(pd.originalPriceINR) || 1999,
      discount: Number(pd.discount) || 10,
      rating: pd.rating || 4.0,
      reviews: pd.reviews || 100,
      store: pd.store
    };
    products.unshift(p);
    save();
    renderAll();
    input.value = '';
    toast('‚úÖ Product added by AI!','success');
  } catch(e) {
    console.error(e);
    // Graceful fallback
    const store = getStore(url);
    const p = {
      id: Date.now(), url,
      name: store.name + ' Product',
      category: 'Other',
      emoji: store.emoji,
      priceINR: 1499,
      originalPriceINR: 2999,
      discount: 50,
      rating: 4.0,
      reviews: 500,
      store
    };
    products.unshift(p);
    save();
    renderAll();
    input.value = '';
    toast('‚úÖ Product added! (AI tip: real product name will show after deployment)','success');
  }

  btn.disabled = false;
  btn.innerHTML = '<span>ü§ñ</span> AI Add';
}

// ===================== DEMO =====================
function loadDemo() {
  const demos = [
    { id:101, url:'https://www.amazon.in/Samsung-Galaxy', name:'Samsung Galaxy S24 FE (8GB+256GB)', category:'Electronics', emoji:'üì±', priceINR:44999, originalPriceINR:64999, discount:31, rating:4.5, reviews:3240, store:{name:'Amazon',emoji:'üõí',color:'#FF9900',key:'amazon'} },
    { id:102, url:'https://www.flipkart.com/hp-laptop', name:'HP 15s Laptop (i5, 16GB RAM, 512GB SSD)', category:'Electronics', emoji:'üíª', priceINR:47990, originalPriceINR:72000, discount:33, rating:4.3, reviews:1856, store:{name:'Flipkart',emoji:'üõçÔ∏è',color:'#2874F0',key:'flipkart'} },
    { id:103, url:'https://www.myntra.com/nike-shoes', name:'Nike Air Max Running Shoes (Men)', category:'Fashion', emoji:'üëü', priceINR:3499, originalPriceINR:8995, discount:61, rating:4.6, reviews:892, store:{name:'Myntra',emoji:'üëó',color:'#FF3E6C',key:'other'} },
    { id:104, url:'https://www.amazon.in/boat-earbuds', name:'boAt Airdopes 141 TWS Earbuds', category:'Electronics', emoji:'üéß', priceINR:999, originalPriceINR:3490, discount:71, rating:4.1, reviews:45000, store:{name:'Amazon',emoji:'üõí',color:'#FF9900',key:'amazon'} },
    { id:105, url:'https://www.meesho.com/kurti-set', name:'Cotton Floral Printed Kurti Set (Women)', category:'Fashion', emoji:'üëó', priceINR:399, originalPriceINR:999, discount:60, rating:4.0, reviews:2100, store:{name:'Meesho',emoji:'üè∑Ô∏è',color:'#9B59B6',key:'meesho'} },
    { id:106, url:'https://www.amazon.in/instant-pot', name:'Instant Pot Duo 7-in-1 Electric Pressure Cooker', category:'Home', emoji:'üç≤', priceINR:7999, originalPriceINR:14999, discount:47, rating:4.7, reviews:12800, store:{name:'Amazon',emoji:'üõí',color:'#FF9900',key:'amazon'} },
  ];
  const existing = new Set(products.map(p=>p.id));
  demos.forEach(d => { if(!existing.has(d.id)) products.push(d); });
  save();
  renderAll();
  toast('üéØ Demo products loaded!','success');
}

// ===================== RENDER =====================
function setFilter(f, el) {
  currentFilter = f;
  document.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
  el.classList.add('active');
  renderAll();
}

function renderAll() {
  const grid = document.getElementById('grid');
  document.getElementById('totalP').textContent = products.length;

  let list = currentFilter === 'all' ? products : products.filter(p => p.store.key === currentFilter);

  if (list.length === 0) {
    grid.innerHTML = `<div class="empty" style="grid-column:1/-1">
      <div class="empty-icon">üêØ</div>
      <h3>‡§Ö‡§™‡§®‡§æ ‡§™‡§π‡§≤‡§æ product add ‡§ï‡§∞‡•á‡§Ç!</h3>
      <p>‡§ä‡§™‡§∞ ‡§ï‡•ã‡§à ‡§≠‡•Ä product ‡§ï‡§æ link paste ‡§ï‡§∞‡•á‡§Ç<br>AI automatically ‡§∏‡§¨ ‡§ï‡•Å‡§õ fetch ‡§ï‡§∞‡•á‡§ó‡§æ<br><br>‡§Ø‡§æ <strong>Load Demo Products</strong> button click ‡§ï‡§∞‡•á‡§Ç</p>
    </div>`;
    return;
  }

  grid.innerHTML = list.map((p, i) => {
    const price = convert(p.priceINR);
    const orig = convert(p.originalPriceINR);
    return `<div class="pcard" style="animation-delay:${i*0.05}s">
      <div class="pimg">
        <span>${p.emoji}</span>
        <div class="ribbon">${p.store.emoji} ${p.store.name}</div>
        <div class="disc-badge">-${p.discount}%</div>
      </div>
      <div class="pbody">
        <div class="pstore" style="color:${p.store.color}">${p.store.emoji} ${p.store.name}</div>
        <div class="pname">${p.name}</div>
        <div class="pmeta">${p.category} ¬∑ ‚≠ê ${p.rating} (${Number(p.reviews).toLocaleString()})</div>
        <div class="price-box">
          <div class="price-top">
            <div>
              <div class="price-main">${price.txt}</div>
              ${price.inr ? `<div class="price-inr">${price.inr}</div>` : ''}
            </div>
            <span class="save-badge">Save ${p.discount}%</span>
          </div>
          <div class="price-orig">MRP: ${orig.txt}</div>
        </div>
        <div class="card-btns">
          <a href="${p.url}" target="_blank" class="btn-buy">üõí Buy Now</a>
          <button class="btn-del" onclick="del(${p.id})">üóëÔ∏è</button>
        </div>
      </div>
    </div>`;
  }).join('');
}

function del(id) {
  products = products.filter(p=>p.id!==id);
  save();
  renderAll();
  toast('üóëÔ∏è Product removed','success');
}

function save() { localStorage.setItem('gt_products', JSON.stringify(products)); }

function toast(msg, type='success') {
  const el = document.getElementById('toast');
  el.textContent = msg;
  el.className = `toast show ${type}`;
  setTimeout(()=>el.className='toast', 3500);
}

// Enter key
document.getElementById('linkInput').addEventListener('keydown', e => { if(e.key==='Enter') addProduct(); });

// Start
init();
</script>
</body>
</html>
<a href="https://wa.me/918953893461" style="position:fixed; bottom:20px; right:20px; background:#25d366; color:white; padding:12px 20px; border-radius:50px; text-decoration:none; font-family:sans-serif; font-weight:bold; z-index:1000; box-shadow: 0px 4px 10px rgba(0,0,0,0.3);" target="_blank">WhatsApp Chat üí¨</a>
